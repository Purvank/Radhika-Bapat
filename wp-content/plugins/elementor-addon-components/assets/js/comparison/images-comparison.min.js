!function(r,t,a){var l={controlSpace:18,maxWidth:"auto",width:!1,resize:!0,titles:{before:"",after:""},layout:{container:'<div class="b-diff"></div>',item:'<div class="b-diff__item"></div>',control:'<div class="b-diff__control"><div class="b-diff__line"></div><div class="b-diff__arrow b-diff__arrow_left"></div><div class="b-diff__arrow b-diff__arrow_right"></div></div>',title:'<div class="b-diff__title"></div>'}};a.fn.simpleImageDiff=function(t){a.extend(l,t||{}),this.each(function(){var o,d;o=a(this),(d={current:!1,currentParent:!1,loaded:0,dimensions:!1,currentImageDim:{},controlPosition:0,clipAreaRatio:!1,$clipedImage:!1,$control:!1,init:function(){var e=o.find("img").slice(0,2),s=a("body");l.maxWidth=0<o.attr("data-maxWidth")?o.attr("data-maxWidth"):l.maxWidth,l.resize=o.attr("data-resize")?parseInt(o.attr("data-resize")):l.resize,d.current=a(l.layout.container),d.currentParent=o.closest(".eac-images-comparison"),d.current.on("prebuild",function(){d.dimensions=d.getImageRealSize(e.first().get(0)),o.css("display","none"),l.width||(l.width=d.current.width()),d.current.insertBefore(o),d.current.css({height:l.width/d.dimensions.width*d.dimensions.height})}),d.current.on("loaded",function(){var t,c,n={};function i(t){d.stopAnimation(d.$control),d.stopAnimation(d.$clipedImage);var n=t.pageY||t.originalEvent.touches[0].pageY,o=t.pageX||t.originalEvent.touches[0].pageX,r=!0,a=0;s.on("mousemove.diff touchmove.diff",function(t){var i=t.pageX||t.originalEvent.touches[0].pageX,e=t.pageY||t.originalEvent.touches[0].pageY;if(Math.abs(e-n)>Math.abs(i-o)&&a<1)return!(r=!1);r&&(d.controlPosition=i-c.left,d.clipAreaRatio=d.controlPosition/d.currentImageDim.width,d.move(d.controlPosition),a+=1)})}n.before=e.first().attr("data-title")||l.titles.before,n.after=e.last().attr("data-title")||l.titles.after,e.each(function(t){var i=a(l.layout.item),e=a(l.layout.title);i.append(a(this)),n.before&&t<1&&(e.addClass("b-diff__title_before"),i.append(e.text(n.after))),n.after&&0<t&&(e.addClass("b-diff__title_after"),i.append(e.text(n.before))),d.current.append(i)}),d.$control=a(l.layout.control),d.$clipedImage=d.current.find(".b-diff__item:last"),d.current.append(d.$control),c=d.current.offset(),d.resizeItems(l.width),t=d.$control.width(),d.controlPosition=d.currentImageDim.width/2-t/2,d.clipAreaRatio=d.controlPosition/d.currentImageDim.width,d.move(d.controlPosition),o.remove(),l.resize&&a(r).resize(function(){d.stopAnimation(d.$control),d.stopAnimation(d.$clipedImage),d.resizeItems(),d.controlPosition=d.clipAreaRatio*d.currentImageDim.width,d.move(d.controlPosition),c=d.current.offset()}),d.current.on("click",function(t){var i=t.pageX||t.originalEvent.touches[0].pageX;d.controlPosition=i-c.left,d.clipAreaRatio=d.controlPosition/d.currentImageDim.width,d.animateItems(d.controlPosition)}),d.current.on("mousedown.diff",function(t){if(1==t.which)return i(t),!1}),d.current.on("touchstart.diff",i),s.on("mouseup.diff touchend.diff mouseleave.diff touchleave.diff",function(){s.off("mousemove.diff touchmove.diff")}),e.on("dragstart",function(){return!1})}),e.each(function(){this.complete?(d.loaded+=1,1===d.loaded&&d.current.trigger("prebuild"),d.loaded==e.length&&d.current.trigger("loaded")):a(this).load(function(){d.loaded+=1,1===d.loaded&&d.current.trigger("prebuild"),d.loaded==e.length&&d.current.trigger("loaded")})})},getImageRealSize:function(t){return{width:t.naturalWidth,height:t.naturalHeight,ratio:t.naturalWidth/t.naturalHeight}},setClipArea:function(t){d.$clipedImage.css("clip","rect(0, "+t+"px,"+d.currentImageDim.height+"px, 0)")},moveControl:function(t){d.$control.css({left:t})},move:function(t){var i=d.$control.width();t<=0?t=0:t>=d.currentImageDim.width-i&&(t=d.currentImageDim.width-i),d.moveControl(t-l.controlSpace),d.setClipArea(t)},resizeItems:function(t){var i,e;e=t||d.current.width(),d.dimensions.width<=e&&(e=d.dimensions.width),"auto"!=l.maxWidth&&(e=l.maxWidth<e?l.maxWidth:e),i=e/d.dimensions.width,d.currentImageDim.width=i*d.dimensions.width,d.currentImageDim.height=i*d.dimensions.height,d.current.find(".b-diff__item").css({width:d.currentImageDim.width,height:d.currentImageDim.height}),d.current.css("height",d.currentImageDim.height),d.$control.css("height",d.currentImageDim.height)},animateItems:function(t){d.$control.css({"-webkit-transition":"left .3s ease-in-out",transition:"left .3s ease-in-out"}),d.$clipedImage.css({"-webkit-transition":"all .3s ease-in-out",transition:"all .3s ease-in-out"}),d.move(t)},stopAnimation:function(t){t.css({"-webkit-transition":"",transition:""})}}).init()})}}(window,document,jQuery);